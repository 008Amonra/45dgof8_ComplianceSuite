<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eva Answers</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/annyang@2.6.1/dist/annyang.min.js"></script>
  <script>
    function greetUser() {
      const name = document.getElementById('username').value || "Explorer";
      const greeting = `Hello, ${name}! Ready to journey with Eva?`;
      document.getElementById('greeting').innerText = greeting;
      playSound();
    }

    function playSound() {
      const audio = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_44a82cfa2d.mp3");
      audio.play();
    }

    async function sendToN8n() {
      const payload = {
        name: document.getElementById('username').value,
        interests: Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.parentElement.innerText.trim()),
        assets: document.querySelector('input[placeholder="e.g. XRP,SOL"]').value,
        sources: document.querySelector('input[placeholder="https://news.ycombinator.com/rss"]').value
      };

      await fetch("https://n8n.45dgof8.com/webhook/test-input", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      document.getElementById("feedback").innerText = "âœ… Settings transmitted successfully!";
      document.getElementById("feedback").classList.remove("hidden");

      await fetch("https://hooks.zapier.com/hooks/catch/123456/abcde", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });
    }

    if (annyang) {
      const commands = {
        'hello': () => greetUser(),
        'export': () => sendToN8n(),
        'sound': () => playSound(),
        'my name is *name': name => {
          document.getElementById('username').value = name;
          greetUser();
        }
      };
      annyang.addCommands(commands);
      annyang.start();
    }
  </script>
</head>
<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white font-sans min-h-screen p-8 animate-fadeIn">
  <div class="max-w-3xl mx-auto bg-gray-800 p-6 rounded-2xl shadow-2xl">
    <div class="flex justify-between items-center mb-4">
      <a href="https://45dgof8.com/blog" class="text-purple-400 hover:underline">Go to My Blog</a>
      <button class="bg-purple-600 text-white px-4 py-1 rounded hover:bg-purple-500">Customize Eva</button>
    </div>

    <h1 class="text-3xl font-bold mb-2 text-center">Welcome to Eva's Answer Hub ðŸŒŒ</h1>
    <p id="greeting" class="text-center text-lg mb-6 italic text-purple-300">Greetings, Space Traveller...</p>

    <!-- Holographic Avatar -->
    <div class="flex justify-center mb-6">
      <iframe src="https://app.readyplayer.me/avatar?frameApi" allow="camera *; microphone *" class="w-64 h-96 rounded-xl shadow-lg border-4 border-purple-700"></iframe>
    </div>

    <label class="block mb-2">Your Name:</label>
    <input id="username" type="text" oninput="greetUser()" class="w-full p-2 mb-4 rounded bg-gray-700 border border-gray-600" />

    <label class="block mb-2">Select Your Interests:</label>
    <div class="grid grid-cols-2 gap-2 mb-4">
      <label class="flex items-center"><input type="checkbox" class="mr-2"> Crypto</label>
      <label class="flex items-center"><input type="checkbox" class="mr-2"> Science</label>
      <label class="flex items-center"><input type="checkbox" class="mr-2"> News</label>
      <label class="flex items-center"><input type="checkbox" class="mr-2"> Art</label>
      <label class="flex items-center"><input type="checkbox" class="mr-2"> Tech</label>
    </div>

    <label class="block mb-2">Followed Assets:</label>
    <input type="text" placeholder="e.g. XRP,SOL" class="w-full p-2 mb-4 rounded bg-gray-700 border border-gray-600" />

    <label class="block mb-2">News Sources:</label>
    <input type="text" placeholder="https://news.ycombinator.com/rss" class="w-full p-2 mb-4 rounded bg-gray-700 border border-gray-600" />

    <div class="mb-4">
      <label class="block mb-2">Upload Preferences:</label>
      <input type="file" class="w-full bg-gray-700 p-2 rounded" />
    </div>

    <div class="text-center mt-6 space-x-4">
      <button onclick="sendToN8n()" class="bg-green-500 hover:bg-green-400 text-black font-semibold px-6 py-2 rounded-xl shadow-md">Export Settings</button>
      <button onclick="playSound()" class="bg-blue-500 hover:bg-blue-400 text-white font-semibold px-4 py-2 rounded-xl shadow-md">ðŸ”Š Sound Test</button>
    </div>

    <div id="feedback" class="text-center mt-4 text-green-400 hidden">âœ… Settings transmitted successfully!</div>
  </div>

  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fadeIn {
      animation: fadeIn 1.2s ease-out;
    }
  </style>
</body>
</html>
